import cv2
import mediapipe as mp
from dollarpy import Recognizer, Template, Point
import socket
import time

###Connectionnnnnn###############################################
mySocket = socket.socket()
hostname="127.0.0.1"# 127.0.0.1 #0.0.0.0
port=4000
mySocket.bind((hostname,port))
mySocket.listen(1)
conn , addr = mySocket.accept()
################################################################

# Mediapipe setup
mp_pose = mp.solutions.pose
mp_hands = mp.solutions.hands
mp_drawing = mp.solutions.drawing_utils

# Initialize pose and hands detectors
pose = mp_pose.Pose(min_detection_confidence=0.5, min_tracking_confidence=0.5)
hands = mp_hands.Hands(min_detection_confidence=0.7, min_tracking_confidence=0.7)

# Set up camera capture
cap = cv2.VideoCapture(0)  # Use appropriate camera index for your system
framecnt = 0

# Define templates for your custom gestures




index = Template('index', [
    Point(110, 240, 1),
    Point(120, 270, 1),
    Point(130, 300, 1),
    Point(140, 330, 1),
    Point(150, 360, 1),
    Point(160, 390, 1),
    Point(170, 420, 1),
    Point(180, 450, 1),
    Point(190, 480, 1),
    Point(200, 510, 1),
    Point(210, 540, 1),
    Point(220, 570, 1),
    Point(230, 600, 1),
    Point(240, 630, 1),
    Point(250, 660, 1),
    Point(260, 690, 1),
])

right = Template('right', [
    Point(96, 276, 1),
    Point(374, 478, 1),
    Point(97, 276, 1),
    Point(386, 463, 1),
    Point(94, 272, 1),
    Point(388, 467, 1),
    Point(95, 257, 1),
    Point(390, 469, 1),
    Point(93, 251, 1),
    Point(390, 471, 1),
    Point(91, 250, 1),
    Point(395, 471, 1),
    Point(94, 244, 1),
    Point(391, 476, 1),
    Point(91, 266, 1),
    Point(382, 468, 1),
    Point(95, 268, 1),
    Point(372, 474, 1),
    Point(88, 260, 1),
    Point(377, 473, 1),
    Point(84, 242, 1),
    Point(380, 482, 1),
    Point(100, 300, 1),
    Point(350, 500, 1),
])


left=Template('left',[
Point(96,277, 1),
Point(375,478, 1),
Point(98,277, 1),
Point(386,463, 1),
Point(94,272, 1),
Point(388,467, 1),
Point(94,257, 1),
Point(390,468, 1),
Point(93,251, 1),
Point(391,470, 1),
Point(92,246, 1),
Point(392,470, 1),
Point(91,248, 1),
Point(396,471, 1),
Point(91,251, 1),
Point(394,469, 1),
Point(98,252, 1),
Point(392,469, 1),
Point(116,303, 1),
Point(390,469, 1),
Point(126,296, 1),
Point(379,469, 1),
Point(129,284, 1),
Point(379,467, 1),
Point(134,278, 1),
Point(380,467, 1),
Point(128,274, 1),
Point(373,468, 1),
Point(125,274, 1),
Point(374,468, 1),
Point(124,272, 1),
Point(374,467, 1),
Point(125,271, 1),
Point(373,467, 1),
Point(115,271, 1),
Point(379,471, 1),
Point(112,261, 1),
Point(382,470, 1),
Point(104,262, 1),
Point(383,469, 1),
Point(95,255, 1),
Point(385,473, 1),
Point(84,256, 1),
Point(386,473, 1),
Point(86,257, 1),
Point(388,473, 1),
Point(88,257, 1),
Point(389,473, 1),
Point(107,257, 1),
Point(386,472, 1),
Point(108,253, 1),
Point(387,472, 1),
Point(103,258, 1),
Point(388,470, 1),
Point(99,264, 1),
Point(388,468, 1),
Point(99,267, 1),
Point(390,465, 1),
Point(96,273, 1),
Point(386,466, 1),
Point(96,273, 1),
Point(387,466, 1),
Point(97,272, 1),
Point(385,466, 1),
Point(98,272, 1),
Point(383,469, 1),
Point(99,271, 1),
Point(382,469, 1),
Point(98,269, 1),
Point(388,469, 1),
Point(99,257, 1),
Point(390,469, 1),
Point(99,242, 1),
Point(391,472, 1),
Point(98,240, 1),
Point(391,474, 1),
Point(95,240, 1),
Point(391,477, 1),
Point(94,240, 1),
Point(391,477, 1),
Point(93,241, 1),
Point(391,473, 1),
Point(96,242, 1),
Point(392,473, 1),
Point(102,249, 1),
Point(392,473, 1),
Point(103,255, 1),
Point(392,470, 1),
Point(104,268, 1),
Point(387,462, 1),
Point(99,270, 1),
Point(387,462, 1),
Point(99,270, 1),
Point(385,462, 1),
Point(99,271, 1),
Point(382,463, 1),
Point(99,271, 1),
Point(382,463, 1),
Point(98,273, 1),
Point(379,466, 1),
Point(99,276, 1),
Point(381,470, 1),
Point(98,275, 1),
Point(381,473, 1),
Point(98,275, 1),
Point(381,468, 1),
Point(98,267, 1),
Point(386,469, 1),
Point(98,258, 1),
Point(387,470, 1),
Point(96,248, 1),
Point(390,472, 1),
Point(95,244, 1),
Point(390,473, 1),
Point(94,243, 1),
Point(390,473, 1),
Point(94,245, 1),
Point(389,473, 1),
Point(94,246, 1),
Point(389,472, 1),
Point(97,248, 1),
Point(386,472, 1),
Point(99,257, 1),
Point(379,470, 1),
Point(100,264, 1),
Point(376,465, 1),
Point(98,272, 1),
Point(372,465, 1),
Point(94,274, 1),
Point(373,466, 1),
Point(93,275, 1),
Point(374,470, 1),
Point(93,274, 1),
Point(376,472, 1),
Point(93,274, 1),
Point(378,473, 1),
Point(102,279, 1),
Point(382,472, 1),
Point(101,271, 1),
Point(389,472, 1),
Point(96,263, 1),
Point(390,475, 1),
Point(94,241, 1),
Point(390,480, 1),
Point(91,239, 1),
Point(389,481, 1),
Point(90,240, 1),
Point(389,481, 1),
Point(89,236, 1),
Point(388,481, 1),
Point(89,235, 1),
Point(389,481, 1),
Point(89,237, 1),
Point(389,477, 1),
Point(88,246, 1),
Point(389,474, 1),
Point(88,259, 1),
Point(389,474, 1),
Point(87,261, 1),
Point(388,475, 1),
Point(93,268, 1),
Point(379,475, 1),
Point(115,266, 1),
Point(375,474, 1),
Point(95,268, 1),
Point(372,475, 1),
Point(91,265, 1),
Point(372,475, 1),
Point(88,261, 1),
Point(373,475, 1),
Point(84,259, 1),
Point(373,477, 1),
Point(85,245, 1),
Point(377,481, 1),
Point(85,244, 1),
Point(377,482, 1),
Point(85,238, 1),
Point(377,482, 1),
Point(85,233, 1),
Point(380,482, 1),
Point(85,235, 1),
Point(375,481, 1),
Point(84,242, 1),
Point(372,481, 1),
Point(83,252, 1),
Point(368,480, 1),
Point(83,253, 1),
Point(368,479, 1),
Point(83,261, 1),
Point(367,478, 1),
Point(85,261, 1),
Point(364,476, 1),
Point(87,267, 1),
Point(364,476, 1),
Point(92,268, 1),
Point(351,476, 1),
Point(92,269, 1),
Point(349,475, 1),
Point(92,270, 1),
Point(348,475, 1),
Point(92,269, 1),
Point(348,477, 1),
Point(93,268, 1),
Point(349,477, 1),
Point(93,268, 1),
Point(350,475, 1),
Point(92,268, 1),
Point(349,476, 1),
Point(92,268, 1),
Point(349,477, 1),
Point(92,268, 1),
Point(347,478, 1),
Point(91,268, 1),
Point(347,479, 1),
Point(58,278, 1),
Point(375,488, 1),
Point(56,278, 1),
Point(381,488, 1),
Point(55,273, 1),
Point(385,488, 1),
Point(55,271, 1),
Point(385,488, 1),
Point(55,272, 1),
Point(385,487, 1),
Point(56,271, 1),
Point(384,487, 1),
Point(61,270, 1),
Point(384,485, 1),
Point(66,274, 1),
Point(383,484, 1),
Point(70,269, 1),
Point(386,481, 1),
Point(70,270, 1),
Point(382,480, 1),
Point(60,269, 1),
Point(382,481, 1),
Point(73,306, 1),
Point(378,481, 1),
Point(57,279, 1),
Point(380,482, 1),
Point(57,275, 1),
Point(378,482, 1),
Point(88,476, 1),
Point(375,481, 1),
Point(86,320, 1),
Point(377,481, 1),
Point(75,277, 1),
Point(378,482, 1),
Point(75,271, 1),
Point(375,481, 1),
Point(75,269, 1),
Point(375,482, 1),
Point(79,260, 1),
Point(377,482, 1),
Point(78,264, 1),
Point(376,483, 1),
Point(78,265, 1),
Point(376,484, 1),
Point(77,265, 1),
Point(377,483, 1),
Point(77,260, 1),
Point(376,484, 1),
Point(69,262, 1),
Point(375,485, 1),
Point(59,263, 1),
Point(378,485, 1),
Point(60,265, 1),
Point(374,484, 1),
Point(85,461, 1),
Point(373,482, 1),
Point(96,484, 1),
Point(372,482, 1),
Point(86,301, 1),
Point(373,482, 1),
Point(70,276, 1),
Point(377,482, 1),
Point(71,263, 1),
Point(380,482, 1),
Point(72,258, 1),
Point(380,482, 1),
Point(76,261, 1),
Point(384,482, 1),
Point(78,261, 1),
Point(387,483, 1),
Point(81,259, 1),
Point(387,482, 1),
Point(80,259, 1),
Point(387,481, 1),
Point(80,260, 1),
Point(386,480, 1),
Point(76,263, 1),
Point(386,480, 1),
Point(67,262, 1),
Point(386,485, 1),
Point(60,262, 1),
Point(379,486, 1),
Point(77,367, 1),
Point(378,484, 1),
Point(84,443, 1),
Point(373,482, 1),
Point(86,372, 1),
Point(370,481, 1),
Point(85,314, 1),
Point(369,481, 1),
Point(70,271, 1),
Point(374,484, 1),
Point(71,268, 1),
Point(375,483, 1),
Point(71,264, 1),
Point(375,482, 1),
Point(74,263, 1),
Point(381,482, 1),
Point(75,263, 1),
Point(382,484, 1),
Point(75,262, 1),
Point(382,484, 1),
Point(76,258, 1),
Point(382,484, 1),
Point(70,261, 1),
Point(387,484, 1),
Point(62,263, 1),
Point(385,485, 1),
Point(60,269, 1),
Point(383,483, 1),
Point(59,269, 1),
Point(378,482, 1),
Point(53,271, 1),
Point(377,483, 1),
Point(55,272, 1),
Point(370,482, 1),
Point(56,272, 1),
Point(368,482, 1),
Point(61,276, 1),
Point(369,482, 1),
Point(61,272, 1),
Point(371,483, 1),
Point(59,272, 1),
Point(375,484, 1),
Point(68,265, 1),
Point(375,482, 1),
Point(72,264, 1),
Point(374,481, 1),
Point(76,263, 1),
Point(378,481, 1),
Point(76,263, 1),
Point(379,482, 1),
Point(76,262, 1),
Point(380,482, 1),
Point(76,265, 1),
Point(383,479, 1),
Point(75,267, 1),
Point(382,479, 1),
Point(73,268, 1),
Point(379,479, 1),
Point(79,288, 1),
Point(374,480, 1),
Point(64,280, 1),
Point(374,480, 1),
Point(64,279, 1),
Point(373,480, 1),
Point(65,278, 1),
Point(372,479, 1),
Point(63,275, 1),
Point(376,481, 1),
Point(61,275, 1),
Point(376,481, 1),
Point(60,275, 1),
Point(378,481, 1),
Point(57,275, 1),
Point(376,481, 1),
Point(57,277, 1),
Point(374,481, 1),
Point(57,276, 1),
Point(377,481, 1),
Point(57,276, 1),
Point(376,482, 1),
Point(57,276, 1),
Point(372,484, 1),
Point(58,276, 1),
Point(372,484, 1),
Point(57,274, 1),
Point(370,488, 1),
Point(57,273, 1),
Point(370,489, 1),
Point(57,273, 1),
Point(369,489, 1),
Point(57,273, 1),
Point(369,489, 1),
Point(57,272, 1),
Point(367,491, 1),
Point(57,273, 1),
Point(361,492, 1),
Point(60,277, 1),
Point(369,485, 1),
Point(72,462, 1),
Point(368,488, 1),
Point(76,443, 1),
Point(368,488, 1),
Point(75,410, 1),
Point(374,489, 1),
Point(81,444, 1),
Point(371,488, 1),
Point(62,287, 1),
Point(373,488, 1),
Point(67,274, 1),
Point(373,485, 1),
Point(74,269, 1),
Point(370,480, 1),
Point(78,283, 1),
Point(360,473, 1),
Point(117,290, 1),
Point(357,472, 1),
Point(106,282, 1),
Point(358,476, 1),
Point(93,269, 1),
Point(362,477, 1),
Point(84,266, 1),
Point(368,480, 1),
Point(89,456, 1),
Point(368,484, 1),
Point(84,322, 1),
Point(367,486, 1),
Point(81,275, 1),
Point(368,487, 1),
Point(75,264, 1),
Point(368,487, 1),
Point(76,254, 1),
Point(371,487, 1),
Point(81,266, 1),
Point(366,486, 1),
Point(83,270, 1),
Point(350,477, 1),
Point(79,273, 1),
Point(350,476, 1),
Point(79,272, 1),
Point(358,477, 1),
Point(80,254, 1),
Point(358,481, 1),
Point(78,261, 1),
Point(362,482, 1),
Point(64,261, 1),
Point(368,486, 1),
Point(66,440, 1),
Point(368,487, 1),
Point(65,301, 1),
Point(368,487, 1),
Point(65,264, 1),
Point(369,489, 1),
Point(66,255, 1),
Point(370,490, 1),
Point(67,255, 1),
Point(370,490, 1),
Point(72,261, 1),
Point(371,486, 1),
Point(73,268, 1),
Point(370,485, 1),
Point(72,281, 1),
Point(368,482, 1),
Point(72,282, 1),
Point(367,481, 1),
Point(77,277, 1),
Point(367,481, 1),
Point(77,270, 1),
Point(368,481, 1),
Point(75,262, 1),
Point(368,484, 1),
Point(71,254, 1),
Point(368,486, 1),
Point(70,255, 1),
Point(368,486, 1),
Point(84,463, 1),
Point(367,486, 1),
Point(91,484, 1),
Point(367,486, 1),
Point(90,460, 1),
Point(366,486, 1),
Point(71,274, 1),
Point(367,487, 1),
Point(69,259, 1),
Point(368,487, 1),
Point(71,260, 1),
Point(369,487, 1),
Point(79,265, 1),
Point(366,487, 1),
Point(92,267, 1),
Point(362,486, 1),
Point(91,266, 1),
Point(361,483, 1),
Point(88,271, 1),
Point(362,483, 1),
Point(85,266, 1),
Point(368,484, 1),
Point(70,268, 1),
Point(370,484, 1),
Point(84,411, 1),
Point(370,484, 1),
Point(84,411, 1),
Point(368,485, 1),
Point(58,307, 1),
Point(369,485, 1),
Point(54,283, 1),
Point(368,484, 1),
Point(76,430, 1),
Point(365,484, 1),
Point(67,297, 1),
Point(365,483, 1),
Point(58,274, 1),
Point(365,484, 1),
Point(82,423, 1),
Point(366,485, 1),
Point(82,290, 1),
Point(368,487, 1),
Point(88,275, 1),
Point(365,483, 1),
Point(95,271, 1),
Point(365,477, 1),
Point(97,270, 1),
Point(363,476, 1),
Point(95,272, 1),
Point(362,476, 1),
Point(92,269, 1),
Point(368,476, 1),
Point(79,269, 1),
Point(368,477, 1),
Point(89,401, 1),
Point(369,477, 1),
Point(90,391, 1),
Point(369,479, 1),
Point(94,428, 1),
Point(369,480, 1),
Point(103,467, 1),
Point(368,480, 1),
Point(89,290, 1),
Point(369,480, 1),
Point(83,287, 1),
Point(369,480, 1),
Point(86,283, 1),
Point(368,480, 1),
Point(93,285, 1),
Point(368,480, 1),
Point(93,289, 1),
Point(361,480, 1),
Point(94,291, 1),
Point(360,481, 1),
Point(94,291, 1),
Point(361,481, 1),
Point(89,291, 1),
Point(361,480, 1),
Point(80,290, 1),
Point(364,484, 1),
Point(75,288, 1),
Point(371,485, 1),
Point(70,282, 1),
Point(370,488, 1),
Point(74,311, 1),
Point(367,487, 1),
Point(75,283, 1),
Point(367,487, 1),
Point(76,284, 1),
Point(366,488, 1),
Point(79,284, 1),
Point(365,488, 1),
Point(89,283, 1),
Point(364,487, 1),
Point(96,283, 1),
Point(361,488, 1),
Point(100,282, 1),
Point(359,490, 1),
Point(103,281, 1),
Point(358,489, 1),
Point(101,279, 1),
Point(360,489, 1),
Point(99,280, 1),
Point(360,489, 1),
Point(96,278, 1),
Point(362,491, 1),
Point(91,278, 1),
Point(364,492, 1),
Point(81,278, 1),
Point(366,494, 1),
Point(77,275, 1),
Point(367,494, 1),
Point(78,275, 1),
Point(370,493, 1),
Point(77,276, 1),
Point(371,490, 1),
Point(76,277, 1),
Point(376,489, 1),
Point(75,277, 1),
Point(375,489, 1),
Point(74,277, 1),
Point(376,488, 1),
Point(73,277, 1),
Point(378,487, 1),
Point(73,278, 1),
Point(378,487, 1),
Point(72,278, 1),
Point(378,486, 1),
Point(72,278, 1),
Point(375,485, 1),
Point(88,294, 1),
Point(373,487, 1),
Point(80,271, 1),
Point(373,487, 1),
Point(64,277, 1),
Point(373,487, 1),
Point(63,278, 1),
Point(370,488, 1),
Point(64,281, 1),
Point(362,488, 1),
Point(69,373, 1),
Point(363,487, 1),
Point(55,291, 1),
Point(369,489, 1),
Point(54,277, 1),
Point(366,491, 1),
Point(51,275, 1),
Point(362,492, 1),
Point(52,275, 1),
Point(363,489, 1),
Point(59,272, 1),
Point(363,488, 1),
Point(64,267, 1),
Point(366,489, 1),
Point(68,265, 1),
Point(365,491, 1),
Point(70,266, 1),
Point(365,492, 1),
Point(71,267, 1),
Point(365,493, 1),
Point(68,267, 1),
Point(366,497, 1),
Point(68,268, 1),
Point(364,496, 1),
Point(64,269, 1),
Point(362,496, 1),
Point(52,270, 1),
Point(362,497, 1),
Point(50,269, 1),
Point(366,497, 1),
Point(48,269, 1),
Point(364,494, 1),
Point(46,267, 1),
Point(364,498, 1),
Point(47,268, 1),
Point(367,494, 1),
Point(55,272, 1),
Point(367,492, 1),
Point(60,273, 1),
Point(367,492, 1),
Point(71,275, 1),
Point(366,492, 1),
Point(82,278, 1),
Point(364,490, 1),
Point(83,280, 1),
Point(364,488, 1),
Point(81,287, 1),
Point(364,485, 1),
Point(71,289, 1),
Point(366,488, 1),
Point(62,284, 1),
Point(368,489, 1),
Point(59,330, 1),
Point(368,489, 1),
Point(55,319, 1),
Point(366,491, 1),
Point(41,296, 1),
Point(373,491, 1),
Point(72,460, 1),
Point(365,492, 1),
Point(78,454, 1),
Point(365,491, 1),
Point(87,402, 1),
Point(363,491, 1),
Point(80,292, 1),
Point(369,490, 1),
Point(77,286, 1),
Point(369,490, 1),
Point(77,282, 1),
Point(369,487, 1),
Point(77,280, 1),
Point(369,486, 1),
Point(75,282, 1),
Point(370,486, 1),
Point(72,281, 1),
Point(368,486, 1),
Point(72,276, 1),
Point(368,487, 1),
Point(80,483, 1),
Point(366,486, 1),
Point(52,310, 1),
Point(364,490, 1),
Point(50,287, 1),
Point(365,489, 1),
Point(51,279, 1),
Point(365,489, 1),
Point(46,274, 1),
Point(371,489, 1),
Point(45,266, 1),
Point(371,492, 1),
Point(47,272, 1),
Point(369,492, 1),
Point(49,271, 1),
Point(368,492, 1),
Point(61,266, 1),
Point(365,492, 1),
Point(66,270, 1),
Point(361,490, 1),
Point(72,271, 1),
Point(363,489, 1),
Point(78,271, 1),
Point(363,489, 1),
Point(78,272, 1),
Point(363,489, 1),
Point(78,274, 1),
Point(363,490, 1),
Point(72,274, 1),
Point(362,492, 1),
Point(69,274, 1),
Point(360,494, 1),
Point(59,274, 1),
Point(362,496, 1),
Point(52,278, 1),
Point(364,496, 1),
Point(52,278, 1),
Point(367,496, 1),
Point(49,281, 1),
Point(372,495, 1),
Point(49,309, 1),
Point(370,495, 1),
Point(49,299, 1),
Point(369,493, 1),
Point(49,294, 1),
Point(367,493, 1),
Point(56,291, 1),
Point(367,491, 1),
Point(61,288, 1),
Point(367,490, 1),
Point(63,287, 1),
Point(372,488, 1),
Point(64,283, 1),
Point(372,487, 1),
Point(65,281, 1),
Point(369,485, 1),
Point(67,281, 1),
Point(368,486, 1),
Point(67,281, 1),
Point(367,486, 1),
Point(67,281, 1),
Point(368,486, 1),
Point(67,281, 1),
Point(368,486, 1),
Point(65,281, 1),
Point(363,487, 1),
Point(65,282, 1),
Point(366,487, 1),
Point(64,282, 1),
Point(368,487, 1),
Point(64,282, 1),
Point(368,488, 1),
Point(65,282, 1),
Point(369,486, 1),
Point(65,281, 1),
Point(366,486, 1),
Point(66,280, 1),
Point(365,485, 1),
Point(65,281, 1),
Point(369,485, 1),
Point(0,400, 1),
Point(373,461, 1),
Point(-17,394, 1),
Point(373,451, 1),
Point(-16,399, 1),
Point(375,455, 1),
Point(-10,400, 1),
Point(380,456, 1),
Point(33,453, 1),
Point(381,479, 1),
Point(72,462, 1),
Point(385,485, 1),
Point(82,455, 1),
Point(386,484, 1),
Point(86,454, 1),
Point(385,484, 1),
Point(97,470, 1),
Point(384,487, 1),
Point(103,478, 1),
Point(383,486, 1),
Point(103,485, 1),
Point(384,488, 1),
Point(111,495, 1),
Point(384,487, 1),
Point(133,489, 1),
Point(381,487, 1),
Point(136,491, 1),
Point(380,488, 1),
Point(113,463, 1),
Point(380,488, 1),
Point(70,303, 1),
Point(384,491, 1),
Point(56,281, 1),
Point(387,491, 1),
Point(65,283, 1),
Point(391,491, 1),
Point(67,282, 1),
Point(395,491, 1),
Point(68,275, 1),
Point(398,491, 1),
Point(70,275, 1),
Point(397,493, 1),
Point(71,275, 1),
Point(399,493, 1),
Point(78,271, 1),
Point(399,493, 1),
Point(78,270, 1),
Point(396,493, 1),
Point(78,272, 1),
Point(391,493, 1),
Point(78,275, 1),
Point(388,496, 1),
Point(78,276, 1),
Point(386,496, 1),
Point(78,279, 1),
Point(387,495, 1),
Point(79,279, 1),
Point(387,493, 1),
Point(79,278, 1),
Point(385,494, 1),
Point(68,262, 1),
Point(386,498, 1),
Point(58,287, 1),
Point(386,498, 1),
Point(59,459, 1),
Point(389,498, 1),
Point(58,483, 1),
Point(389,498, 1),
Point(50,295, 1),
Point(390,498, 1),
Point(53,251, 1),
Point(399,503, 1),
Point(63,259, 1),
Point(400,503, 1),
Point(65,269, 1),
Point(400,503, 1),
Point(68,280, 1),
Point(396,501, 1),
Point(73,282, 1),
Point(393,500, 1),
Point(74,282, 1),
Point(388,500, 1),
Point(71,284, 1),
Point(389,499, 1),
Point(76,404, 1),
Point(389,499, 1),
Point(59,481, 1),
Point(392,494, 1),
Point(60,457, 1),
Point(393,494, 1),
Point(60,415, 1),
Point(394,492, 1),
Point(66,481, 1),
Point(391,491, 1),
Point(66,276, 1),
Point(392,492, 1),
Point(66,264, 1),
Point(392,493, 1),
Point(66,275, 1),
Point(395,493, 1),
Point(67,281, 1),
Point(395,493, 1),
Point(73,279, 1),
Point(393,493, 1),
Point(87,283, 1),
Point(392,494, 1),
Point(92,283, 1),
Point(388,494, 1),
Point(94,280, 1),
Point(385,495, 1),
Point(91,284, 1),
Point(384,495, 1),
Point(89,265, 1),
Point(395,496, 1),
Point(81,258, 1),
Point(396,496, 1),
Point(74,362, 1),
Point(395,498, 1),
Point(61,462, 1),
Point(395,498, 1),
Point(63,488, 1),
Point(393,498, 1),
Point(57,421, 1),
Point(393,498, 1),
Point(67,261, 1),
Point(393,499, 1),
Point(71,258, 1),
Point(399,500, 1),
Point(73,272, 1),
Point(398,500, 1),
Point(85,277, 1),
Point(392,499, 1),
Point(99,287, 1),
Point(387,498, 1),
Point(97,290, 1),
Point(380,498, 1),
Point(94,288, 1),
Point(379,497, 1),
Point(76,288, 1),
Point(379,497, 1),
Point(74,273, 1),
Point(381,500, 1),
Point(68,287, 1),
Point(384,500, 1),
Point(61,272, 1),
Point(382,500, 1),
Point(60,272, 1),
Point(384,499, 1),
Point(56,275, 1),
Point(384,496, 1),
Point(55,276, 1),
Point(385,498, 1),
Point(66,454, 1),
Point(384,498, 1),
Point(62,316, 1),
Point(385,500, 1),
Point(59,276, 1),
Point(379,491, 1),
Point(57,276, 1),
Point(385,491, 1),
Point(57,274, 1),
Point(386,490, 1),
Point(52,272, 1),
Point(387,490, 1),
Point(54,272, 1),
Point(389,486, 1),
Point(56,272, 1),
Point(388,485, 1),
Point(60,271, 1),
Point(385,485, 1),
Point(67,274, 1),
Point(384,484, 1),
Point(70,270, 1),
Point(388,481, 1),
Point(70,271, 1),
Point(387,480, 1),
Point(58,270, 1),
Point(384,480, 1),
Point(81,465, 1),
Point(378,480, 1),
Point(61,303, 1),
Point(380,483, 1),
Point(57,276, 1),
Point(382,482, 1),
Point(85,474, 1),
Point(374,481, 1),
Point(75,307, 1),
Point(377,481, 1),
Point(67,271, 1),
Point(377,482, 1),
Point(67,273, 1),
Point(377,482, 1),
Point(67,270, 1),
Point(377,482, 1),
Point(75,262, 1),
Point(377,482, 1),
Point(77,263, 1),
Point(377,481, 1),
Point(78,262, 1),
Point(378,482, 1),
Point(77,263, 1),
Point(378,480, 1),
Point(76,261, 1),
Point(378,481, 1),
Point(69,264, 1),
Point(378,482, 1),
Point(62,265, 1),
Point(380,482, 1),
Point(62,275, 1),
Point(377,482, 1),
Point(82,466, 1),
Point(377,481, 1),
Point(89,428, 1),
Point(374,482, 1),
Point(78,300, 1),
Point(375,482, 1),
Point(67,275, 1),
Point(378,482, 1),
Point(68,265, 1),
Point(379,482, 1),
Point(69,260, 1),
Point(379,481, 1),
Point(74,264, 1),
Point(379,481, 1),
Point(77,263, 1),
Point(384,481, 1),
Point(80,261, 1),
Point(384,480, 1),
Point(80,259, 1),
Point(385,479, 1),
Point(79,262, 1),
Point(385,478, 1),
Point(73,265, 1),
Point(386,478, 1),
Point(65,263, 1),
Point(386,481, 1),
Point(59,264, 1),
Point(379,482, 1),
Point(78,366, 1),
Point(377,482, 1),
Point(87,457, 1),
Point(373,482, 1),
Point(76,322, 1),
Point(369,482, 1),
Point(65,276, 1),
Point(370,484, 1),
Point(60,267, 1),
Point(374,486, 1),
Point(65,269, 1),
Point(374,485, 1),
Point(68,268, 1),
Point(374,483, 1),
Point(73,264, 1),
Point(375,483, 1),
Point(75,263, 1),
Point(376,485, 1),
Point(75,263, 1),
Point(378,484, 1),
Point(76,261, 1),
Point(378,484, 1),
Point(71,262, 1),
Point(385,484, 1),
Point(63,263, 1),
Point(384,485, 1),
Point(59,269, 1),
Point(383,483, 1),
Point(58,273, 1),
Point(379,482, 1),
Point(53,276, 1),
Point(378,482, 1),
Point(54,277, 1),
Point(371,482, 1),
Point(55,276, 1),
Point(369,483, 1),
Point(56,277, 1),
Point(369,483, 1),
Point(56,273, 1),
Point(372,484, 1),
Point(56,273, 1),
Point(375,484, 1),
Point(65,268, 1),
Point(376,481, 1),
Point(70,268, 1),
Point(375,481, 1),
Point(74,263, 1),
Point(379,481, 1),
Point(75,263, 1),
Point(379,482, 1),
Point(75,264, 1),
Point(379,482, 1),
Point(75,264, 1),
Point(381,478, 1),
Point(73,266, 1),
Point(380,478, 1),
Point(72,268, 1),
Point(379,478, 1),
Point(81,292, 1),
Point(375,479, 1),
Point(65,280, 1),
Point(375,480, 1),
Point(65,280, 1),
Point(373,480, 1),
Point(63,279, 1),
Point(372,479, 1),
Point(61,274, 1),
Point(376,481, 1),
Point(60,274, 1),
Point(376,481, 1),
Point(59,274, 1),
Point(377,481, 1),
Point(56,274, 1),
Point(377,481, 1),
Point(55,277, 1),
Point(375,481, 1),
Point(55,277, 1),
Point(377,481, 1),
Point(56,276, 1),
Point(376,482, 1),
Point(56,276, 1),
Point(370,484, 1),
Point(56,276, 1),
Point(371,485, 1),
Point(55,274, 1),
Point(369,488, 1),
Point(56,273, 1),
Point(369,489, 1),
Point(56,273, 1),
Point(368,489, 1),
Point(56,274, 1),
Point(368,489, 1),
Point(56,274, 1),
Point(366,490, 1),
Point(56,274, 1),
Point(360,492, 1),
])

left = Template('left', [
Point(128,469, 1),
Point(326,281, 1),
Point(127,460, 1),
Point(325,283, 1),
Point(127,459, 1),
Point(325,285, 1),
Point(128,459, 1),
Point(325,285, 1),
Point(127,460, 1),
Point(327,286, 1),
Point(126,460, 1),
Point(336,285, 1),
Point(126,460, 1),
Point(341,285, 1),
Point(125,454, 1),
Point(343,284, 1),
Point(124,455, 1),
Point(344,283, 1),
Point(124,455, 1),
Point(345,288, 1),
Point(123,458, 1),
Point(345,300, 1),
Point(125,460, 1),
Point(343,305, 1),
Point(125,458, 1),
Point(337,307, 1),
Point(126,459, 1),
Point(334,308, 1),
Point(126,460, 1),
Point(326,308, 1),
Point(129,461, 1),
Point(325,308, 1),
Point(129,461, 1),
Point(324,307, 1),
Point(129,460, 1),
Point(325,306, 1),
Point(127,457, 1),
Point(325,301, 1),
Point(127,457, 1),
Point(327,291, 1),
Point(129,457, 1),
Point(332,279, 1),
Point(127,452, 1),
Point(334,267, 1),
Point(125,452, 1),
Point(337,264, 1),
Point(126,452, 1),
Point(338,262, 1),
Point(125,452, 1),
Point(338,257, 1),
Point(123,453, 1),
Point(337,258, 1),
Point(123,460, 1),
Point(334,261, 1),
Point(123,461, 1),
Point(327,263, 1),
Point(122,464, 1),
Point(322,264, 1),
Point(122,463, 1),
Point(319,265, 1),
Point(122,463, 1),
Point(317,266, 1),
Point(122,464, 1),
Point(318,266, 1),
Point(118,462, 1),
Point(318,265, 1),
Point(118,463, 1),
Point(322,264, 1),
Point(118,463, 1),
Point(325,262, 1),
Point(117,463, 1),
Point(329,261, 1),
Point(116,463, 1),
Point(331,260, 1),
Point(113,462, 1),
Point(331,260, 1),
Point(114,462, 1),
Point(330,261, 1),
Point(115,463, 1),
Point(327,264, 1),
Point(116,464, 1),
Point(320,266, 1),
Point(120,462, 1),
Point(314,267, 1),
Point(120,461, 1),
Point(312,269, 1),
Point(120,461, 1),
Point(312,269, 1),
Point(120,461, 1),
Point(313,269, 1),
Point(120,461, 1),
Point(314,269, 1),
Point(120,461, 1),
Point(318,269, 1),
Point(118,461, 1),
Point(321,268, 1),
Point(117,462, 1),
Point(324,267, 1),
Point(117,461, 1),
Point(327,266, 1),
Point(117,463, 1),
Point(329,266, 1),
Point(117,466, 1),
Point(329,267, 1),
Point(117,464, 1),
Point(329,270, 1),
Point(114,459, 1),
Point(325,272, 1),
Point(114,457, 1),
Point(320,274, 1),
Point(114,457, 1),
Point(318,274, 1),
Point(114,457, 1),
Point(318,273, 1),
Point(114,457, 1),
Point(321,272, 1),
Point(115,457, 1),
Point(324,270, 1),
Point(117,459, 1),
Point(328,263, 1),
Point(122,459, 1),
Point(331,262, 1),
Point(123,461, 1),
Point(334,262, 1),
Point(123,459, 1),
Point(334,262, 1),
Point(121,459, 1),
Point(334,263, 1),
Point(120,460, 1),
Point(331,267, 1),
Point(118,459, 1),
Point(327,269, 1),
Point(116,458, 1),
Point(324,272, 1),
Point(114,458, 1),
Point(324,273, 1),
Point(114,457, 1),
Point(325,272, 1),
Point(111,455, 1),
Point(328,269, 1),
Point(112,456, 1),
Point(331,267, 1),
Point(112,456, 1),
Point(334,264, 1),
Point(114,456, 1),
Point(335,264, 1),
Point(114,456, 1),
Point(335,263, 1),
Point(116,458, 1),
Point(334,268, 1),
Point(119,463, 1),
Point(331,271, 1),
Point(121,469, 1),
Point(328,272, 1),
Point(121,472, 1),
Point(328,272, 1),
Point(121,472, 1),
Point(328,272, 1),
Point(123,472, 1),
Point(329,269, 1),
Point(123,472, 1),
Point(333,265, 1),
Point(126,470, 1),
Point(334,264, 1),
Point(129,467, 1),
Point(335,264, 1),
Point(129,466, 1),
Point(335,264, 1),
Point(129,466, 1),
Point(334,268, 1),
Point(128,466, 1),
Point(333,272, 1),
Point(126,466, 1),
Point(327,274, 1),
Point(121,464, 1),
Point(323,276, 1),
Point(120,463, 1),
Point(323,276, 1),
Point(120,463, 1),
Point(324,276, 1),
Point(121,463, 1),
Point(325,275, 1),
Point(121,464, 1),
Point(330,271, 1),
Point(126,462, 1),
Point(333,270, 1),
Point(123,460, 1),
Point(334,269, 1),
Point(125,458, 1),
Point(334,269, 1),
Point(125,459, 1),
Point(333,272, 1),
Point(125,460, 1),
Point(333,273, 1),
Point(124,460, 1),
Point(333,273, 1),
Point(125,460, 1),
Point(332,273, 1),
Point(125,460, 1),
Point(332,274, 1),
Point(125,460, 1),
Point(332,274, 1),
Point(124,461, 1),
Point(332,274, 1),
Point(124,460, 1),
Point(332,275, 1),
Point(123,460, 1),
Point(336,270, 1),
Point(123,463, 1),
Point(337,265, 1),
Point(126,466, 1),
Point(342,262, 1),
Point(125,467, 1),
Point(347,262, 1),
Point(125,467, 1),
Point(346,260, 1),
Point(125,467, 1),
Point(346,261, 1),
Point(123,470, 1),
Point(346,262, 1),
Point(125,468, 1),
Point(342,263, 1),
Point(125,464, 1),
Point(337,266, 1),
Point(124,462, 1),
Point(335,267, 1),
Point(124,462, 1),
Point(335,267, 1),
Point(125,462, 1),
Point(335,265, 1),
Point(126,465, 1),
Point(338,265, 1),
Point(127,465, 1),
Point(342,264, 1),
Point(122,465, 1),
Point(344,263, 1),
Point(122,466, 1),
Point(345,264, 1),
Point(121,466, 1),
Point(345,265, 1),
Point(121,466, 1),
Point(342,265, 1),
Point(120,466, 1),
Point(336,268, 1),
Point(120,466, 1),
Point(331,270, 1),
Point(120,466, 1),
Point(329,270, 1),
Point(120,466, 1),
Point(329,267, 1),
Point(118,468, 1),
Point(330,264, 1),
Point(122,466, 1),
Point(331,261, 1),
Point(124,470, 1),
Point(339,261, 1),
Point(125,471, 1),
Point(345,261, 1),
Point(125,469, 1),
Point(347,261, 1),
Point(123,466, 1),
Point(347,261, 1),
Point(124,466, 1),
Point(347,261, 1),
Point(124,465, 1),
Point(343,261, 1),
Point(124,464, 1),
Point(336,263, 1),
Point(126,465, 1),
Point(334,263, 1),
Point(125,465, 1),
Point(334,263, 1),
Point(126,462, 1),
Point(334,260, 1),
Point(126,461, 1),
Point(336,259, 1),
Point(126,463, 1),
Point(341,259, 1),
Point(127,468, 1),
Point(345,259, 1),
Point(128,468, 1),
Point(344,258, 1),
Point(127,466, 1),
Point(344,258, 1),
Point(127,464, 1),
Point(342,260, 1),
Point(127,464, 1),
Point(338,264, 1),
Point(127,464, 1),
Point(335,267, 1),
Point(127,464, 1),
Point(333,268, 1),
Point(126,465, 1),
Point(332,268, 1),
Point(124,466, 1),
Point(333,266, 1),
Point(125,466, 1),
Point(334,262, 1),
Point(125,465, 1),
Point(338,260, 1),
Point(131,468, 1),
Point(341,259, 1),
Point(131,468, 1),
Point(341,257, 1),
Point(130,467, 1),
Point(340,257, 1),
Point(128,468, 1),
Point(339,257, 1),
Point(129,468, 1),
Point(338,259, 1),
Point(129,467, 1),
Point(337,260, 1),
Point(130,467, 1),
Point(336,260, 1),
Point(129,467, 1),
Point(336,260, 1),
Point(128,467, 1),
Point(337,259, 1),
Point(127,467, 1),
Point(338,258, 1),
Point(127,466, 1),
Point(339,258, 1),
Point(126,466, 1),
Point(339,257, 1),
Point(126,464, 1),
Point(337,257, 1),
Point(122,465, 1),
Point(337,259, 1),
Point(122,466, 1),
Point(334,262, 1),
Point(122,466, 1),
Point(331,265, 1),
Point(121,465, 1),
Point(332,266, 1),
Point(118,465, 1),
Point(332,266, 1),
Point(122,464, 1),
Point(332,265, 1),
Point(124,465, 1),
Point(332,261, 1),
Point(124,465, 1),
Point(334,259, 1),
Point(123,466, 1),
Point(336,258, 1),
Point(124,465, 1),
Point(336,258, 1),
Point(126,466, 1),
Point(336,258, 1),
Point(126,469, 1),
Point(334,260, 1),
Point(123,468, 1),
Point(331,270, 1),
Point(121,465, 1),
Point(325,272, 1),
Point(121,459, 1),
Point(320,272, 1),
Point(121,460, 1),
Point(320,272, 1),
Point(121,463, 1),
Point(321,273, 1),
Point(121,463, 1),
Point(321,274, 1),
Point(121,464, 1),
Point(321,275, 1),
Point(122,464, 1),
Point(322,275, 1),
Point(123,466, 1),
Point(324,275, 1),
Point(123,466, 1),
Point(325,275, 1),
Point(120,466, 1),
Point(327,275, 1),
Point(117,467, 1),
Point(327,275, 1),
Point(119,465, 1),
Point(328,275, 1),
Point(120,465, 1),
Point(328,275, 1),
Point(120,465, 1),
Point(330,275, 1),
Point(121,465, 1),
Point(330,275, 1),
Point(123,466, 1),
Point(330,275, 1),
Point(123,466, 1),
Point(330,275, 1),
Point(124,465, 1),
Point(330,274, 1),
Point(124,465, 1),
Point(330,275, 1),
Point(122,465, 1),
Point(330,275, 1),
Point(122,465, 1),
Point(331,274, 1),
Point(122,465, 1),
Point(331,274, 1),
Point(122,465, 1),
Point(331,274, 1),
Point(122,465, 1),
Point(331,274, 1),
Point(121,465, 1),
Point(331,274, 1),
Point(120,465, 1),
Point(331,274, 1),
Point(120,466, 1),
Point(331,274, 1),
Point(121,466, 1),
Point(330,273, 1),
Point(121,465, 1),
Point(326,273, 1),
Point(120,465, 1),
Point(325,272, 1),
Point(119,465, 1),
Point(326,273, 1),
Point(119,465, 1),
Point(326,272, 1),
Point(119,465, 1),
Point(330,270, 1),
Point(122,464, 1),
Point(332,266, 1),
Point(123,465, 1),
Point(335,265, 1),
Point(123,465, 1),
Point(335,265, 1),
Point(123,465, 1),
Point(336,271, 1),
Point(123,464, 1),
Point(333,277, 1),
Point(123,466, 1),
Point(327,282, 1),
Point(122,466, 1),
Point(318,283, 1),
Point(123,467, 1),
Point(314,283, 1),
Point(124,467, 1),
Point(314,282, 1),
Point(125,467, 1),
Point(316,282, 1),
Point(125,468, 1),
Point(320,282, 1),
Point(124,466, 1),
Point(322,275, 1),
Point(124,465, 1),
Point(323,271, 1),
Point(124,465, 1),
Point(327,271, 1),
Point(126,465, 1),
Point(327,271, 1),
Point(126,465, 1),
Point(326,274, 1),
Point(126,465, 1),
Point(324,277, 1),
Point(123,466, 1),
Point(321,279, 1),
Point(123,466, 1),
Point(319,279, 1),
Point(120,467, 1),
Point(319,280, 1),
Point(121,467, 1),
Point(321,279, 1),
Point(124,467, 1),
Point(325,275, 1),
Point(127,467, 1),
Point(331,270, 1),
Point(127,468, 1),
Point(333,266, 1),
Point(126,464, 1),
Point(334,263, 1),
Point(122,464, 1),
Point(334,262, 1),
Point(118,463, 1),
Point(333,263, 1),
Point(117,465, 1),
Point(331,270, 1),
Point(117,465, 1),
Point(327,271, 1),
Point(116,465, 1),
Point(326,271, 1),
Point(115,467, 1),
Point(325,272, 1),
Point(117,469, 1),
Point(326,273, 1),
Point(121,472, 1),
Point(326,273, 1),
Point(122,472, 1),
Point(326,274, 1),
Point(120,472, 1),
Point(326,275, 1),
Point(118,472, 1),
Point(325,276, 1),
Point(118,472, 1),
Point(325,276, 1),
Point(117,472, 1),
Point(325,276, 1),
Point(116,470, 1),
Point(325,276, 1),
Point(117,468, 1),
Point(326,276, 1),
Point(120,468, 1),
Point(326,276, 1),
Point(120,469, 1),
Point(326,276, 1),
Point(120,464, 1),
Point(323,277, 1),
Point(120,463, 1),
Point(320,277, 1),
Point(120,463, 1),
Point(320,277, 1),
Point(120,463, 1),
Point(321,277, 1),
Point(120,463, 1),
Point(323,277, 1),
Point(120,464, 1),
Point(326,273, 1),
Point(123,464, 1),
Point(327,271, 1),
Point(121,466, 1),
Point(328,270, 1),
Point(123,467, 1),
Point(328,270, 1),
Point(124,467, 1),
Point(328,271, 1),
Point(122,467, 1),
Point(326,272, 1),
Point(120,466, 1),
Point(320,275, 1),
Point(120,463, 1),
Point(317,277, 1),
Point(121,460, 1),
Point(317,278, 1),
Point(125,460, 1),
Point(320,279, 1),
Point(125,459, 1),
Point(324,278, 1),
Point(125,455, 1),
Point(329,275, 1),
Point(130,454, 1),
Point(331,273, 1),
Point(134,453, 1),
Point(332,273, 1),
Point(136,456, 1),
Point(333,273, 1),
Point(133,458, 1),
Point(333,276, 1),
Point(128,458, 1),
Point(328,278, 1),
Point(128,457, 1),
Point(322,281, 1),
Point(126,457, 1),
Point(319,282, 1),
Point(126,457, 1),
Point(318,282, 1),
Point(126,460, 1),
Point(319,282, 1),
Point(125,463, 1),
Point(323,282, 1),
Point(126,464, 1),
Point(328,279, 1),
Point(130,464, 1),
Point(331,276, 1),
Point(131,464, 1),
Point(332,275, 1),
Point(131,464, 1),
Point(332,274, 1),
Point(131,465, 1),
Point(332,274, 1),
Point(131,465, 1),
Point(332,274, 1),
Point(131,464, 1),
Point(332,274, 1),
Point(131,464, 1),
Point(332,274, 1),
Point(133,465, 1),
Point(332,274, 1),
Point(132,466, 1),
Point(332,274, 1),
Point(125,466, 1),
Point(331,274, 1),
Point(122,466, 1),
Point(330,275, 1),
Point(122,464, 1),
Point(330,275, 1),
Point(121,465, 1),
Point(330,275, 1),
Point(121,465, 1),
Point(330,273, 1),
Point(123,465, 1),
Point(330,273, 1),
Point(123,466, 1),
Point(330,274, 1),
Point(123,466, 1),
Point(330,273, 1),
Point(124,471, 1),
Point(330,273, 1),
Point(123,473, 1),
Point(331,273, 1),
Point(125,472, 1),
Point(331,273, 1),
Point(123,472, 1),
Point(330,273, 1),
Point(125,472, 1),
Point(330,272, 1),
Point(123,472, 1),
Point(330,271, 1),
Point(122,472, 1),
Point(330,271, 1),
Point(123,467, 1),
Point(355,259, 1),
Point(123,467, 1),
Point(355,259, 1),
Point(121,465, 1),
Point(354,260, 1),
Point(123,461, 1),
Point(353,260, 1),
Point(126,460, 1),
Point(352,259, 1),
Point(127,455, 1),
Point(351,258, 1),
Point(127,454, 1),
Point(351,257, 1),
Point(128,454, 1),
Point(351,257, 1),
Point(128,454, 1),
Point(351,257, 1),
Point(126,454, 1),
Point(351,257, 1),
Point(126,455, 1),
Point(351,256, 1),
Point(126,456, 1),
Point(354,256, 1),
Point(127,456, 1),
Point(356,257, 1),
Point(127,457, 1),
Point(360,256, 1),
Point(127,459, 1),
Point(362,256, 1),
Point(127,465, 1),
Point(364,256, 1),
Point(128,466, 1),
Point(364,258, 1),
Point(132,466, 1),
Point(363,259, 1),
Point(137,466, 1),
Point(361,259, 1),
Point(138,461, 1),
Point(354,258, 1),
Point(132,457, 1),
Point(348,258, 1),
Point(130,451, 1),
Point(343,256, 1),
Point(130,448, 1),
Point(341,257, 1),
Point(132,448, 1),
Point(341,257, 1),
Point(130,448, 1),
Point(342,257, 1),
Point(128,456, 1),
Point(345,257, 1),
Point(128,457, 1),
Point(347,258, 1),
Point(132,457, 1),
Point(347,259, 1),
Point(132,449, 1),
Point(343,260, 1),
Point(129,450, 1),
Point(341,264, 1),
Point(130,450, 1),
Point(332,266, 1),
Point(131,450, 1),
Point(327,267, 1),
Point(129,452, 1),
Point(325,268, 1),
Point(128,452, 1),
Point(326,268, 1),
Point(130,452, 1),
Point(328,267, 1),
Point(130,453, 1),
Point(335,267, 1),
Point(128,454, 1),
Point(343,262, 1),
Point(127,460, 1),
Point(352,262, 1),
Point(126,465, 1),
Point(355,261, 1),
Point(126,465, 1),
Point(353,260, 1),
Point(126,464, 1),
Point(350,264, 1),
Point(126,459, 1),
Point(345,265, 1),
Point(126,458, 1),
Point(335,270, 1),
Point(125,456, 1),
Point(329,272, 1),
Point(124,456, 1),
Point(327,273, 1),
Point(124,456, 1),
Point(329,273, 1),
Point(127,456, 1),
Point(333,271, 1),
Point(130,456, 1),
Point(337,269, 1),
Point(129,456, 1),
Point(343,263, 1),
Point(129,458, 1),
Point(347,261, 1),
Point(129,458, 1),
Point(347,260, 1),
Point(129,457, 1),
Point(346,263, 1),
Point(129,457, 1),
Point(341,264, 1),
Point(127,457, 1),
Point(334,267, 1),
Point(126,457, 1),
Point(328,267, 1),
Point(126,454, 1),
Point(325,267, 1),
Point(127,454, 1),
Point(326,265, 1),
Point(125,454, 1),
Point(329,265, 1),
Point(116,455, 1),
Point(331,261, 1),
Point(114,457, 1),
Point(337,260, 1),
Point(115,457, 1),
Point(339,259, 1),
Point(118,459, 1),
Point(337,262, 1),
Point(120,459, 1),
Point(332,264, 1),
Point(119,458, 1),
Point(325,267, 1),
Point(120,454, 1),
Point(322,266, 1),
Point(123,454, 1),
Point(323,263, 1),
Point(124,456, 1),
Point(325,260, 1),
Point(124,459, 1),
Point(331,258, 1),
Point(125,459, 1),
Point(338,256, 1),
Point(125,465, 1),
Point(349,256, 1),
Point(121,467, 1),
Point(356,256, 1),
Point(121,467, 1),
Point(354,255, 1),
Point(121,464, 1),
Point(352,256, 1),
Point(121,457, 1),
Point(346,260, 1),
Point(121,457, 1),
Point(340,263, 1),
Point(122,456, 1),
Point(336,264, 1),
Point(123,456, 1),
Point(336,262, 1),
Point(122,456, 1),
Point(339,257, 1),
Point(122,458, 1),
Point(349,257, 1),
Point(120,461, 1),
Point(357,256, 1),
Point(119,463, 1),
Point(362,255, 1),
Point(115,468, 1),
Point(361,255, 1),
Point(115,468, 1),
Point(361,255, 1),
Point(117,467, 1),
Point(350,256, 1),
Point(118,467, 1),
Point(342,256, 1),
Point(119,464, 1),
Point(339,257, 1),
Point(117,464, 1),
Point(338,257, 1),
Point(115,464, 1),
Point(339,257, 1),
Point(115,465, 1),
Point(341,256, 1),
Point(117,465, 1),
Point(346,256, 1),
Point(117,470, 1),
Point(354,256, 1),
Point(117,469, 1),
Point(354,256, 1),
Point(117,468, 1),
Point(353,256, 1),
Point(117,465, 1),
Point(349,258, 1),
Point(117,462, 1),
Point(339,262, 1),
Point(119,459, 1),
Point(331,266, 1),
Point(119,456, 1),
Point(327,268, 1),
Point(123,456, 1),
Point(329,267, 1),
Point(122,456, 1),
Point(330,264, 1),
Point(122,457, 1),
Point(335,262, 1),
Point(118,456, 1),
Point(341,259, 1),
Point(116,460, 1),
Point(351,259, 1),
Point(119,460, 1),
Point(354,262, 1),
Point(123,458, 1),
Point(352,264, 1),
Point(125,456, 1),
Point(349,266, 1),
Point(127,451, 1),
Point(334,269, 1),
Point(127,449, 1),
Point(319,271, 1),
Point(121,449, 1),
Point(315,276, 1),
Point(119,449, 1),
Point(314,277, 1),
Point(119,449, 1),
Point(314,277, 1),
Point(119,449, 1),
Point(315,276, 1),
Point(119,446, 1),
Point(321,272, 1),
Point(120,451, 1),
Point(334,265, 1),
Point(122,452, 1),
Point(349,264, 1),
Point(122,458, 1),
Point(355,262, 1),
Point(125,458, 1),
Point(355,262, 1),
Point(125,455, 1),
Point(352,262, 1),
Point(125,453, 1),
Point(350,262, 1),
Point(126,449, 1),
Point(342,264, 1),
Point(125,449, 1),
Point(332,268, 1),
Point(125,444, 1),
Point(328,268, 1),
Point(125,445, 1),
Point(327,269, 1),
Point(126,446, 1),
Point(328,268, 1),
Point(126,448, 1),
Point(331,267, 1),
Point(126,450, 1),
Point(338,264, 1),
Point(126,455, 1),
Point(349,263, 1),
Point(126,458, 1),
Point(356,261, 1),
Point(125,459, 1),
Point(359,261, 1),
Point(124,459, 1),
Point(359,261, 1),
Point(122,457, 1),
Point(357,261, 1),
Point(122,457, 1),
Point(355,262, 1),
Point(125,456, 1),
Point(347,262, 1),
Point(123,448, 1),
Point(341,262, 1),
Point(124,443, 1),
Point(340,264, 1),
Point(123,444, 1),
Point(340,264, 1),
Point(123,445, 1),
Point(340,265, 1),
Point(123,449, 1),
Point(343,266, 1),
Point(123,450, 1),
Point(348,267, 1),
Point(121,453, 1),
Point(356,267, 1),
Point(121,455, 1),
Point(363,268, 1),
Point(121,455, 1),
Point(367,268, 1),
Point(121,455, 1),
Point(369,268, 1),
Point(121,459, 1),
Point(368,268, 1),
Point(121,459, 1),
Point(367,268, 1),
Point(123,459, 1),
Point(361,267, 1),
Point(123,459, 1),
Point(351,267, 1),
Point(121,458, 1),
Point(349,268, 1),
Point(121,457, 1),
Point(349,267, 1),
Point(120,459, 1),
Point(349,266, 1),
Point(118,463, 1),
Point(350,266, 1),
Point(118,462, 1),
Point(354,266, 1),
Point(120,464, 1),
Point(357,266, 1),
Point(123,464, 1),
Point(363,266, 1),
Point(125,465, 1),
Point(367,266, 1),
Point(125,465, 1),
Point(368,265, 1),
Point(125,466, 1),
Point(369,265, 1),
Point(124,466, 1),
Point(369,265, 1),
Point(122,467, 1),
Point(369,265, 1),
Point(121,468, 1),
Point(369,265, 1),
Point(123,468, 1),
Point(369,265, 1),
Point(123,467, 1),
Point(369,264, 1),
Point(123,468, 1),
Point(368,264, 1),
Point(121,468, 1),
Point(367,264, 1),

Point(119,469, 1),
Point(367,264, 1),
Point(119,471, 1),
Point(367,264, 1),
Point(116,469, 1),
Point(366,265, 1),
Point(116,468, 1),
Point(358,265, 1),
Point(121,464, 1),
Point(352,267, 1),
Point(121,462, 1),
Point(349,271, 1),
Point(121,462, 1),
Point(347,271, 1),
Point(120,459, 1),
Point(348,270, 1),
Point(118,458, 1),
Point(349,266, 1),
Point(118,463, 1),
Point(359,265, 1),
Point(115,465, 1),
Point(366,261, 1),
Point(116,467, 1),
Point(372,261, 1),
Point(118,468, 1),
Point(373,260, 1),
Point(117,468, 1),
Point(372,260, 1),
Point(118,466, 1),
Point(371,262, 1),
Point(120,466, 1),
Point(362,263, 1),
Point(120,463, 1),
Point(359,265, 1),
Point(121,461, 1),
Point(356,264, 1),
Point(121,461, 1),
Point(356,262, 1),
Point(124,461, 1),
Point(356,262, 1),
Point(127,470, 1),
Point(362,262, 1),
Point(128,470, 1),
Point(370,262, 1),
Point(128,470, 1),
Point(377,262, 1),
Point(125,471, 1),
Point(380,261, 1),
Point(122,471, 1),
Point(381,262, 1),
Point(121,470, 1),
Point(380,262, 1),
Point(121,469, 1),
Point(380,262, 1),
Point(121,469, 1),
Point(369,262, 1),
Point(120,467, 1),
Point(358,262, 1),
Point(119,463, 1),
Point(354,266, 1),
Point(119,463, 1),
Point(355,265, 1),
Point(114,462, 1),
Point(356,265, 1),
Point(114,467, 1),
Point(358,265, 1),
Point(117,468, 1),
Point(366,263, 1),
Point(117,468, 1),
Point(373,262, 1),
Point(118,468, 1),
Point(377,262, 1),
Point(117,468, 1),
Point(378,262, 1),
Point(116,468, 1),
Point(377,263, 1),
Point(116,468, 1),
Point(370,264, 1),
Point(116,461, 1),
Point(360,264, 1),
Point(116,460, 1),
Point(349,263, 1),
Point(117,460, 1),
Point(349,263, 1),
Point(117,461, 1),
Point(351,262, 1),
Point(117,463, 1),
Point(352,262, 1),
Point(116,463, 1),
Point(352,262, 1),
Point(118,466, 1),
Point(358,262, 1),
Point(118,467, 1),
Point(364,262, 1),
Point(115,467, 1),
Point(368,262, 1),
Point(115,468, 1),
Point(368,262, 1),
Point(114,463, 1),
Point(363,263, 1),
Point(114,462, 1),
Point(356,265, 1),
Point(116,463, 1),
Point(344,268, 1),
Point(118,465, 1),
Point(338,268, 1),
Point(117,465, 1),
Point(340,266, 1),
Point(115,464, 1),
Point(344,267, 1),
Point(115,464, 1),
Point(348,267, 1),
Point(112,464, 1),
Point(356,267, 1),
Point(112,467, 1),
Point(362,269, 1),
Point(112,470, 1),
Point(363,270, 1),
Point(114,468, 1),
Point(363,270, 1),
Point(115,465, 1),
Point(358,271, 1),
Point(119,464, 1),
Point(353,271, 1),
Point(118,463, 1),
Point(353,271, 1),
Point(118,463, 1),
Point(356,271, 1),
Point(117,465, 1),
Point(363,271, 1),
Point(117,465, 1),
Point(371,271, 1),
Point(117,466, 1),
Point(378,273, 1),
Point(124,467, 1),
Point(380,276, 1),
Point(124,467, 1),
Point(378,276, 1),
Point(123,467, 1),
Point(378,275, 1),
Point(123,464, 1),
Point(369,275, 1),
Point(123,464, 1),
Point(362,274, 1),
Point(121,464, 1),
Point(361,273, 1),
Point(120,464, 1),
Point(362,272, 1),
Point(119,464, 1),
Point(361,271, 1),
Point(119,467, 1),
Point(361,270, 1),
Point(119,467, 1),
Point(361,270, 1),
Point(120,467, 1),
Point(361,270, 1),
Point(121,468, 1),
Point(362,270, 1),
Point(121,468, 1),
Point(364,269, 1),
Point(122,468, 1),
Point(366,269, 1),
Point(122,468, 1),
Point(371,268, 1),
Point(124,469, 1),
Point(376,267, 1),
Point(123,469, 1),
Point(378,267, 1),
Point(122,468, 1),
Point(377,268, 1),
Point(121,463, 1),
Point(363,268, 1),
Point(121,463, 1),
Point(354,273, 1),
Point(121,463, 1),
Point(351,275, 1),
Point(121,460, 1),
Point(350,275, 1),
Point(120,462, 1),
Point(353,272, 1),
Point(120,465, 1),
Point(367,271, 1),
Point(120,466, 1),
Point(376,271, 1),
Point(119,466, 1),
Point(376,271, 1),
Point(118,467, 1),
Point(375,273, 1),
Point(119,467, 1),
Point(371,274, 1),
Point(122,465, 1),
Point(360,275, 1),
Point(123,464, 1),
Point(355,276, 1),
Point(121,463, 1),
Point(355,276, 1),
Point(119,464, 1),
Point(356,273, 1),
Point(115,466, 1),
Point(363,273, 1),
Point(109,465, 1),
Point(372,269, 1),
Point(110,465, 1),
Point(379,268, 1),
Point(110,463, 1),
Point(380,267, 1),
Point(111,463, 1),
Point(380,267, 1),
Point(111,463, 1),
Point(378,268, 1),
Point(111,463, 1),
Point(370,267, 1),
Point(112,463, 1),
Point(360,268, 1),
Point(112,462, 1),
Point(349,268, 1),
Point(112,462, 1),
Point(342,265, 1),
Point(110,461, 1),
Point(342,262, 1),
Point(110,460, 1),
Point(344,261, 1),
Point(108,461, 1),
Point(345,260, 1),
Point(105,468, 1),
Point(348,261, 1),
Point(105,467, 1),
Point(353,261, 1),
Point(105,470, 1),
Point(358,261, 1),
Point(105,469, 1),
Point(360,261, 1),
Point(105,469, 1),
Point(360,261, 1),
Point(105,466, 1),
Point(356,260, 1),
Point(108,468, 1),
Point(348,260, 1),
Point(108,468, 1),
Point(341,260, 1),
Point(111,469, 1),
Point(340,262, 1),
Point(110,469, 1),
Point(338,262, 1),
Point(112,469, 1),
Point(339,262, 1),
Point(112,467, 1),
Point(342,260, 1),
Point(112,465, 1),
Point(348,260, 1),
Point(112,465, 1),
Point(357,261, 1),
Point(113,466, 1),
Point(363,261, 1),
Point(112,466, 1),
Point(366,261, 1),
Point(114,465, 1),
Point(365,261, 1),
Point(114,464, 1),
Point(365,261, 1),
Point(114,464, 1),
Point(354,261, 1),
Point(114,464, 1),
Point(344,261, 1),
Point(114,465, 1),
Point(340,261, 1),
Point(114,467, 1),
Point(341,261, 1),
Point(116,467, 1),
Point(342,261, 1),
Point(116,467, 1),
Point(344,261, 1),
Point(114,466, 1),
Point(348,261, 1),
Point(114,466, 1),
Point(352,261, 1),
Point(114,466, 1),
Point(354,261, 1),
Point(118,467, 1),
Point(354,261, 1),
Point(117,464, 1),
Point(353,260, 1),
Point(116,464, 1),
Point(347,259, 1),
Point(117,464, 1),
Point(343,260, 1),
Point(119,464, 1),
Point(339,261, 1),
Point(119,464, 1),
Point(336,261, 1),
Point(119,464, 1),
Point(337,260, 1),
Point(118,464, 1),
Point(338,260, 1),
Point(115,463, 1),
Point(342,260, 1),
Point(117,466, 1),
Point(346,260, 1),
Point(117,466, 1),
Point(349,260, 1),
Point(117,466, 1),
Point(351,260, 1),
Point(117,465, 1),
Point(352,260, 1),
Point(117,466, 1),
Point(352,259, 1),
Point(120,466, 1),
Point(352,259, 1),
Point(119,467, 1),
Point(353,260, 1),
])


pick = Template('pick', [
    Point(334, 427, 1),  # Wrist
    Point(93, 231, 1),   # Thumb base
    Point(335, 427, 1),  # Thumb base
    Point(95, 235, 1),   # Thumb tip
    Point(343, 426, 1),  # Index base
    Point(91, 234, 1),   # Index base
    Point(346, 426, 1),  # Index PIP
    Point(89, 236, 1),   # Index tip
    Point(346, 425, 1),  # Middle base
    Point(87, 237, 1),   # Middle base
    Point(345, 424, 1),  # Middle PIP
    Point(86, 238, 1),   # Middle tip
    Point(344, 422, 1),  # Ring base
    Point(83, 239, 1),   # Ring base
    Point(342, 422, 1),  # Ring PIP
    Point(82, 240, 1),   # Ring tip
    Point(340, 422, 1),  # Pinky base
    Point(81, 237, 1),   # Pinky base
    Point(339, 422, 1),  # Pinky PIP
    Point(82, 236, 1),   # Pinky tip
    Point(340, 420, 1),  # Palm center
    Point(115, 340, 1),  # Distinct Palm center point
    Point(340, 420, 1),  # Another Palm center
])


# Assuming recognizer and other required components are already defined

recognizer = Recognizer([ index,right,left])
Allpoints = []
last_recognized_gesture = None
cooldown_frames = 37
cooldown_counter = 0
max_points = 25

def filter_redundant_points(points, min_distance=10):
    filtered_points = []
    for i in range(len(points)):
        if i == 0 or (
            abs(points[i].x - points[i - 1].x) > min_distance or
            abs(points[i].y - points[i - 1].y) > min_distance
        ):
            filtered_points.append(points[i])
    return filtered_points

cap = cv2.VideoCapture(0)  # Open the default camera (0 for first camera)
if not cap.isOpened():
    print("Error: Could not open camera.")
    exit()

while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        print("Can't receive frame (stream end?). Exiting ...")
        break

    frame = cv2.resize(frame, (640, 480))

    try:
        RGB = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
        results = pose.process(RGB)

        if results.pose_landmarks:
            image_height, image_width, _ = frame.shape

            # Capture the index finger landmarks
            right_index_x = int(results.pose_landmarks.landmark[mp_pose.PoseLandmark.RIGHT_INDEX].x * image_width)
            right_index_y = int(results.pose_landmarks.landmark[mp_pose.PoseLandmark.RIGHT_INDEX].y * image_height)
            left_index_x = int(results.pose_landmarks.landmark[mp_pose.PoseLandmark.LEFT_INDEX].x * image_width)
            left_index_y = int(results.pose_landmarks.landmark[mp_pose.PoseLandmark.LEFT_INDEX].y * image_height)

            # Add points to Allpoints
            Allpoints.append(Point(right_index_x, right_index_y, 1))
            Allpoints.append(Point(left_index_x, left_index_y, 1))

            # Limit Allpoints size
            if len(Allpoints) > max_points:
                Allpoints = Allpoints[-max_points:]

            # Apply filtering to reduce overlap
            filtered_points = filter_redundant_points(Allpoints, min_distance=15)

            # Recognize gestures
            if cooldown_counter == 0:
                result = recognizer.recognize(filtered_points)
                if result and result != last_recognized_gesture:
                    print(f"Gesture recognized: {result[0]}")
                    
                    
                    msg2 =bytes(result[0], 'utf-8')
                    conn.send(msg2)
                    
                        
                    last_recognized_gesture = result
                    cooldown_counter = cooldown_frames
                    Allpoints = []  # Reset points after recognition

            mp_drawing.draw_landmarks(frame, results.pose_landmarks, mp_pose.POSE_CONNECTIONS)

        cv2.imshow('Output', frame)

    except Exception as e:
        print(f"Error: {e}")

    if cooldown_counter > 0:
        cooldown_counter -= 1

    # Break if 'q' is pressed
    if cv2.waitKey(1) == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()